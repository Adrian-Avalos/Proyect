<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora IMC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background-color: #000; color: #fff; padding-bottom: 3rem; }
    .card { background-color: #111; border-radius: 1rem; padding: 1rem; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
    .chart-container { max-width: 500px; margin: 2rem auto; }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="text-center fw-bold">Calculadora de IMC</h1>

    <div class="row justify-content-center mt-4">
      <div class="col-md-6">
        <div class="card">
          <label class="form-label">Peso (kg)</label>
          <input type="number" id="peso" class="form-control mb-3" placeholder="Ej: 70">

          <label class="form-label">Altura (cm)</label>
          <input type="number" id="altura" class="form-control mb-3" placeholder="Ej: 170">

          <button onclick="calcularIMC()" class="btn btn-info w-100">Calcular IMC</button>

          <div id="resultado" class="text-center mt-4 fs-5 fw-bold"></div>
        </div>
      </div>
    </div>

    <div class="chart-container">
      <canvas id="graficoIMC"></canvas>
    </div>
  </div>

  <script>
    let grafico = null;

    function calcularIMC() {
      const peso = parseFloat(document.getElementById('peso').value);
      const alturaCm = parseFloat(document.getElementById('altura').value);
      const resultado = document.getElementById('resultado');

      if (!peso || !alturaCm || peso <= 0 || alturaCm <= 0) {
        resultado.textContent = 'Por favor, ingresá peso y altura válidos.';
        return;
      }

      const alturaM = alturaCm / 100;
      const imc = peso / (alturaM * alturaM);
      let clasificacion = "";

      if (imc < 18.5) clasificacion = "Bajo peso";
      else if (imc < 25) clasificacion = "Normal";
      else if (imc < 30) clasificacion = "Sobrepeso";
      else clasificacion = "Obesidad";

      resultado.innerHTML = `Tu IMC es <strong>${imc.toFixed(2)}</strong> (${clasificacion})`;
      mostrarGrafico(imc);
    }

    function mostrarGrafico(valor) {
      const ctx = document.getElementById('graficoIMC').getContext('2d');
      if (grafico) grafico.destroy();

      grafico = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Bajo peso', 'Normal', 'Sobrepeso', 'Obesidad'],
          datasets: [{
            label: 'IMC',
            data: [18.4, 24.9, 29.9, 35],
            backgroundColor: ['#0dcaf0', '#198754', '#ffc107', '#dc3545']
          }, {
            label: 'Tu IMC',
            data: [null, null, null, null],
            type: 'line',
            borderColor: '#fff',
            borderWidth: 2,
            pointRadius: 6,
            pointBackgroundColor: '#fff',
            data: Array(4).fill(null).map((_, i) => {
              if (valor < 18.5 && i === 0) return valor;
              if (valor >= 18.5 && valor < 25 && i === 1) return valor;
              if (valor >= 25 && valor < 30 && i === 2) return valor;
              if (valor >= 30 && i === 3) return valor;
              return null;
            })
          }]
        },
        options: {
          scales: {
            y: { beginAtZero: true }
          },
          plugins: {
            legend: { display: true }
          }
        }
      });
    }
  </script>
</body>
</html>
